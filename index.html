<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Control de Inventarios</title>
    <link rel="stylesheet" href="node_modules/bootstrap/dist/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="style.css">

  </head>
  <body>
    
    <script>
      // You can also require other files to run in this process
      require('./renderer.js')

    </script>

    <div class="container">
      <div class="card card-container">
        <img id="profile-img" class="profile-img-card" src="user-admin.png">
        <p id="profile-name" class="profile-name-card"></p>
        
    
        <form class="form-signin">
          <span id="reauth-email" class="reauth-email"></span>
          <input class="form-control" type="text" name="" placeholder="usuario" id="usurname_textField">
          <input class="form-control" type="password" name="" placeholder="password" id="password_textField">
          <button class="btn btn-lg btn-primary btn-block btn-signin" type="submit" id="btn-login">LogIn</button>
        </form>
      </div>
    </div>
    
    
  </body>

  <script type="text/javascript">

    
    document.getElementById("btn-login").addEventListener("click", (e)=> {

      //mySQL port: 3306

      e.preventDefault();
      var mySQL = require("mysql");


      var connection = mySQL.createConnection({
        host:"localhost", 
        user:"root", 
        password: "root",
        database: "loginControlInventario"
      });


      connection.connect((err) => {

        if(err){
          return alert(err.stack);
        }

        alert("connection successfully established");
      });


      //queries 

      $queryString = "SELECT * FROM `usuarios_1`";
      connection.query($queryString, (err, rows, fields) => {
        if(err){
          return alert("an error occured with the query", err);
        }

        for (var i = 0; i < rows.length; i++) {
          if(document.getElementById('usurname_textField').value === rows[i].user_name && document.getElementById('password_textField').value === rows[i].password){
            console.log("congrats");
            builtElementsAdmin();
          } else {
            alert("password o nombre de usuario incorrectos");
          }
        }
        


      });


      connection.end(()=> {
        console.log("connection succcessfully closed");
      });



    });

    function builtElementsAdmin() {
      
    }


  </script>
</html>
